#!/bin/bash

# Define your list of strings
itemsList=("item_111_kings_key" "item_112_key_of_knowledge" "item_114_floodgate_key" "item_115_mermaid_key" "item_116_key_of_delusion" "item_117_brass_key" "item_118_iron_key" "item_12a_young_dragon_gem" "item_12b_pitcher_of_nadya" "item_12f_spirit_key" "item_130_blue_crystal" "item_131_flaming_key" "item_129_sealed_sword_stone" \
    "item_47_cap" "item_32_mace" "item_35_morning_star" "item_a1_buckler" "item_1_short_sword" "item_2_deadly_short_sword" "item_4_long_sword" "item_3_long_sword" "item_a3_small_shield" "item_5c_quilted_armor" "item_5d_leather_armor" "item_5b_quilted_armor" "item_99_leg_guard" "item_f_broad_sword" "item_9_rapier" "item_5_long_sword" "item_60_scale_mail" "item_5e_leather_armor" "item_61_scale_mail" "item_7e_metal_glove" "item_a6_large_shield" "item_92_steel_boots_of_resist" "item_82_caustic_hand_guard" "item_81_fiery_gauntlet" "item_49_crown_of_resist" "item_48_crown" "item_8e_leather_boots" "item_4a_crown_of_composure" "item_a4_small_shield" "item_90_steel_boots" "item_b_lethal_rapier" "item_23_guardian_bastard_sword" "item_ac_great_shield" "item_a2_buckler" "item_8d_leather_boots" "item_8f_hard_boots" "item_79_leather_glove" "item_7c_wooden_glove" "item_5f_magical_leather_armor" "item_36_swift_morning_star" "item_34_shining_mace" "item_4d_helm" "item_7a_leather_glove" "item_39_axe" "item_91_steel_boots" "item_7b_leather_glove" "item_a7_large_shield" "item_63_plate_mail" "item_62_scale_mail_of_curing" "item_11_broad_sword" "item_33_crushing_mace" "item_ec_bracelet_of_recovery" "item_42_bow" "item_ce_soul_ring" "item_14_crushing_broad_sword" "item_fb_magical_amulet" "item_a5_shield_of_resist" "item_c4_summoner_ring_of_fire" "item_7_fiery_long_sword" "item_3a_giant_axe" "item_af_dark_great_shield" "item_18_bastard_sword" "item_e9_bracelet_of_movement" "item_9b_harden_leg_guard" "item_83_gauntlet" "item_10_broad_sword" "item_95_caustic_steel_boots" "item_7d_wooden_glove" "item_a9_large_shield_of_balance" "item_a8_harden_large_shield" "item_51_full_helm" "item_64_plate_mail" "item_4b_wizard_crown" "item_fe_deadly_amulet" "item_ea_bracelet_of_composure" "item_b1_tower_shield" "item_b3_tower_shield_of_honor" "item_4f_magical_helm" "item_8_silent_sword" "item_2c_deadly_great_sword" "item_27_great_sword" "item_9a_leg_guard" "item_67_plate_mail_of_curing" "item_6_keenest_long_sword" "item_93_steel_boots_of_curing" "item_94_steel_boots_of_resist" "item_c5_summoner_ring_of_fire" "item_19_bastard_sword" "item_50_full_helm" "item_73_full_plate" "item_68_plate_mail" "item_3c_crushing_axe" "item_b2_tower_shield" "item_fc_amulet_of_movement" "item_6a_fiery_plate_mail" "item_ed_mind_bracelet" "item_ff_amulet_of_composure" "item_3d_deadly_axe" "item_84_gauntlet" "item_db_caustic_ring" "item_cf_soul_ring" "item_ae_shining_great_shield" "item_9c_fiery_leg_guard" "item_98_steel_boots_of_resist" "item_a_rapier" "item_c_shadow_blade" "item_101_amulet_of_resist" "item_16_guardian_broad_sword" "item_aa_fiery_large_shield" "item_fd_amulet_of_guardian" "item_54_fiery_full_helm" "item_96_swift_steel_boots" "item_44_bow_gun" "item_d8_ring_of_poison" "item_6f_plate_mail_of_protect" "item_b4_harden_tower_shield" "item_1e_fiery_bastard_sword" "item_c7_priest_ring_of_fire" "item_80_metal_glove" "item_37_frosty_morning_star" "item_6c_caustic_plate_mail" "item_9d_frosty_leg_guard" "item_cb_balance_ring_of_frost" "item_1f_frosty_bastard_sword" "item_6b_frosty_plate_mail" "item_9f_caustic_leg_guard" "item_da_sorcerer_ring_of_poison" "item_ca_summoner_ring_of_frost" "item_cd_sorcerer_ring_of_frost" "item_d7_ring_of_poison" "item_b6_caustic_tower_shield" "item_d9_ring_of_protect" "item_c9_summoner_ring_of_frost" "item_e8_bracelet_of_balance" "item_e7_bracelet_of_resist" "item_d3_dark_ring" "item_ef_deadly_bracelet" "item_3b_giant_axe" "item_100_amulet_of_curing" "item_bc_gothic_shield_of_resist" "item_d_shadow_wolf" "item_24_dark_sword" "item_ee_mighty_ring" "item_55_great_helm" "item_de_caustic_sorcerer_ring" "item_38_axe" "item_43_warrior_bow" "item_53_harden_full_helm" "item_52_full_helm_of_curing" "item_69_magical_plate_mail" "item_4e_helm" "item_dc_caustic_ring" "item_dd_caustic_priest_ring" "item_3f_battle_axe" "item_74_plate_mail_of_honor" "item_ab_great_shield" "item_40_deadly_battle_axe" "item_28_great_sword" "item_2f_mighty_great_sword" "item_3e_living_axe" "item_d4_dark_ring" "item_e1_ring_of_dark_souls" "item_87_swift_gauntlet" "item_89_arm_guard" "item_b7_tower_shield_of_balance" "item_df_ring_of_desire" "item_c1_gothic_shield_of_rage" "item_b9_gothic_shield" "item_4c_devil_crown" "item_29_great_sword" "item_ba_harden_gothic_shield" "item_e_shadow_tiger" "item_f8_holy_bracelet" "item_f9_king_bracelet" "item_eb_bracelet_of_curing" "item_41_keenest_battle_axe" "item_1d_crushing_bastard_sword" "item_c2_shinning_gothic_shield" "item_ad_great_shield_of_balance" "item_bd_gothic_shield_of_honor" "item_9e_leg_guard_of_protect" "item_8a_arm_guard_of_composure" "item_70_eternal_plate_mail" "item_77_plate_mail_of_rage" "item_e4_ring_of_dead_spirit" "item_c6_ring_of_fire_resist" "item_d5_dark_priest_ring" "item_d0_holy_ring_of_resist" "item_d1_holy_ring_of_priest" "item_e6_ring_of_drain" "item_bb_gothic_shield" "item_b5_tower_shield_of_protect" "item_103_sorcerer_amulet" "item_86_gauntlet_of_resist" "item_f4_bracelet_of_composure" "item_f5_deadly_bracelet" "item_56_great_helm" "item_30_guardian_great_sword" "item_106_amulet_of_recovery" "item_107_star_amulet" "item_17_dragon_sword" "item_f1_sorcerer_bracelet" "item_f2_priest_bracelet" "item_15_keenest_broad_sword" "item_6d_shining_plate_mail" "item_6e_dark_plate_mail" "item_26_righteous_sword" "item_21_deadly_bastard_sword" "item_66_plate_mail_of_resist" "item_1a_lethal_bastard_sword" "item_20_shining_bastard_sword" "item_1b_swift_bastard_sword" "item_22_mighty_bastard_sword" "item_65_harden_plate_mail" "item_cc_priest_ring_of_frost" "item_102_mind_amulet" "item_105_amulet_of_balance" "item_104_priest_amulet" "item_e0_ring_of_ice" "item_f7_priest_bracelet" "item_88_deadly_gauntlet" "item_f0_guardian_bracelet" "item_57_harden_great_helm" "item_45_fiery_bow_gun" "item_108_amulet_of_winter" "item_59_mystic_great_helm" "item_b8_tower_shield_of_resist" "item_8b_deadly_arm_guard" "item_75_harden_full_plate" "item_97_steel_boots_of_balance" "item_7f_metal_glove" "item_2d_keenest_great_sword" "item_2e_crushing_great_sword" "item_f6_harden_bracelet" "item_72_holy_plate_mail" "item_b0_deadly_great_shield" "item_c3_holy_gothic_shield" "item_fa_moon_bracelet" "item_13_broad_sword" "item_31_blood_sword" "item_2a_swift_great_sword" "item_109_endless_amulet" "item_be_gothic_shield_of_balance" "item_e3_ring_of_seal" "item_c8_sorcerer_ring_of_fire" "item_78_knight_plate_mail" "item_76_god_plate" "item_5a_holy_great_helm" "item_8c_master_arm_guard" "item_e5_ring_of_rage" "item_bf_master_gothic_shield" "item_c0_gothic_shield_of_power" "item_e2_black_ring" "item_d6_dark_sorcerer_ring" "item_a0_holy_leg_guard" "item_71_devil_plate_mail" "item_d2_holy_ring" "item_25_magical_bastard_sword" "item_2b_fiery_great_sword")

# Specify the folder containing HTML files
folderPath="./generated"

# Specify the output CSV file
outputFile="test_item_uniques_test.csv"

# Create CSV file with header
echo "Preset,Status,MissingItems" > "$outputFile"

# Loop through each HTML file
find "$folderPath" -type f -name "*.html" | while read -r file; do
    # Extract immediate folder name without the full path
    folderName="$(dirname "$file")"

    # Initialize result and missingItems variables
    result="OK"  # Assume all items are present
    missingItems=""

    # Loop through each string in itemsList
    for item in "${itemsList[@]}"; do
        # Check if the string is missing in the file
        if ! grep -q "$item" "$file"; then
            result="MISSING"  # Set to MISSING if any item is missing
            missingItems+="$item, "  # Append missing item to the list
        fi
    done

    # Remove trailing comma and space from missingItems
    missingItems="${missingItems%, }"

    # Append result, missingItems, and folderName to CSV file
    echo "$folderName,$result,$missingItems" >> "$outputFile"
done
